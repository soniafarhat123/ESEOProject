{% extends 'base.html.twig' %}

{% block title %}Hello UserController!{% endblock %}

{% block body %}
    <!-- Content wrapper -->
    <div class="content-wrapper">
        <!-- Content -->

        <div class="container-xxl flex-grow-1 container-p-y">
            <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Profile /</span> Modification</h4>

            <div class="row">
                <div class="col-md-12">
                    <ul class="nav nav-pills flex-column flex-md-row mb-3">
                        <li class="nav-item">
                            <a class="nav-link" href="{{path('home.index')}}"><i class="bx bx-user me-1"></i> Compte</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="{{ path('security.edit') }}"
                            ><i class='bx bxs-cog'></i> Paramètre</a
                            >
                        </li>
                    </ul>
                    <div class="card mb-4">
                        <h5 class="card-header">Profile Details</h5>
                        <!-- Account -->
                        <div class="card-body">
                            <div class="d-flex align-items-start align-items-sm-center gap-4">
                                {% if user.image is null %}
                                    <img
                                            src="{{ asset('images/user/user_default_image.webp') }}"
                                            alt="user-avatar"
                                            class="d-block rounded"
                                            height="100"
                                            width="100"
                                            id="uploadedAvatar"
                                    />
                                {% else %}
                                    <img
                                            src="{{ asset('images/user/'~user.image~'') }}"
                                            alt="user-avatar"
                                            class="d-block rounded"
                                            height="100"
                                            width="100"
                                            id="uploadedAvatar"
                                    />
                                {% endif %}
                            </div>
                        </div>
                        <hr class="my-0" />
                        <div class="card-body">
                            <form id="formAccountSettings" method="POST" onsubmit="return false">
                                <div class="row">
                                    <div class="mb-3 col-md-6">
                                        <label for="lastName" class="form-label">Nom & Prénom</label>
                                        <input class="form-control" type="text" name="lastName" id="lastName" value="{{user.fullName }}" disabled
                                        />
                                    </div>
                                    <div class="mb-3 col-md-6">
                                        <label for="email" class="form-label">E-mail</label>
                                        <input
                                                class="form-control"
                                                type="text"
                                                id="email"
                                                name="email"
                                                value="{{ user.email }}"
                                                disabled

                                        />
                                    </div>
                                    <div class="mb-3 col-md-6">
                                        <label for="organization" class="form-label">pseudo</label>
                                        <input
                                                type="text"
                                                class="form-control"
                                                id="organization"
                                                name="organization"
                                                value="{{ user.pseudo }}"
                                                disabled
                                        />
                                    </div>
                                    <div class="mb-3 col-md-6">
                                        <label for="address" class="form-label">Role</label>
                                        <input type="text" class="form-control" id="address" name="address" value="Utilisateur" disabled/>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!-- /Account -->
                    </div>
                    <div class="card">
                        <h5 class="card-header">Supprimer Compte</h5>
                        <div class="card-body">
                            <div class="mb-3 col-12 mb-0">
                                <div class="alert alert-warning">
                                    <h6 class="alert-heading fw-bold mb-1">Aêtes-vous sûr de vouloir supprimer votre compte ?</h6>
                                    <p class="mb-0">
                                        Une fois que vous avez supprimé votre compte, il n'y a plus de retour en arrière. Soyez certain.</p>
                                </div>
                            </div>
                            <form id="formAccountDeactivation" onsubmit="return false">
                                <div class="form-check mb-3">
                                    <input
                                            class="form-check-input"
                                            type="checkbox"
                                            name="accountActivation"
                                            id="accountActivation"
                                    />
                                    <label class="form-check-label" for="accountActivation"
                                    >Je confirme la suppression de mon compte</label
                                    >
                                </div>
                                <a class="btn btn-danger deactivate-account" href="{{ path('security.delete', {id : user.id}) }}">Supprimer mon compte</a>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- / Content -->


        <div class="content-backdrop fade"></div>
    </div>
    <!-- Content wrapper -->
{% endblock %}
